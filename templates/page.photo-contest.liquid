
    <style>
        #MainContent {
            background-color: #F9F7F6;
        }

        .custom-upload-wrap {
            }
.custom-upload-label {
  margin-bottom: 15px;
}

.custom-upload-area {
  border: 2px dashed #e7a2b2;
  background: #fff0f4;
  border-radius: 8px;
  padding: 32px 0;
  text-align: center;
  cursor: pointer;
  margin-bottom: 15px;
  position: relative;
}
.custom-upload-area:hover {
  border-color: #d16b8a;
  background: #ffe5ec;
}
.custom-upload-icon {
  font-size: 2.2em;
  color: #d16b8a;
  margin-bottom: 6px;
}
.custom-upload-text {
  font-size: 1.1em;
  font-weight: 600;
  color: #7b3b6a;
}
.custom-upload-subtext {
  font-size: 0.95em;
  color: #fd4b17;
  opacity: 0.7;
}
.custom-upload-list {
  margin-top: 8px;
}
.custom-upload-file {
  display: flex;
  flex-direction: column;
  /* align-items: center; */
  background: #fff;
  border-radius: 6px;
  margin-bottom: 6px;
  padding: 8px 12px;
  font-size: 1em;
  border: 1px solid #f6b3c0;
  position: relative;
}
.custom-upload-file.error {
  background: #ffd6db;
  color: #d16b8a;
}
.custom-upload-filename {
    flex: 1 1 0%;
    min-width: 0;
    max-width: 100%;
    line-height: 1.25em;
    font-size: 1.1rem;
    color: #555;
    word-break: break-all;
    overflow-wrap: break-word;
    word-wrap: break-word;
    white-space: normal;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block; /* Êàñ‰∏çÂÜôdisplay */
}
.custom-upload-filesize {
  margin-left: 10px;
  color: #888;
  font-size: 0.95em;
}
.custom-upload-progress {
  width: 120px;
  height: 8px;
  background: #ffe5ec;
  border-radius: 4px;
  margin: 0 10px;
  overflow: hidden;
  position: relative;
}
.custom-upload-progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #d16b8a, #b86fc6);
  width: 0%;
  transition: width 0.2s;
}
.custom-upload-remove {
  cursor: pointer;
}
.custom-upload-error-msg {
  color: #fff;
  background: #d16b8a;
  border-radius: 4px;
  padding: 6px 10px;
  margin-top: 8px;
  font-size: 0.98em;
  word-break: break-all;
}
.required { color: #d16b8a; }
.custom-upload-area.dragover {
  border-color: #d16b8a;
  background: #ffe5ec;
  /* ‰Ω†ÂèØ‰ª•Âä†Êõ¥Â§öÈ´ò‰∫ÆÊïàÊûú */
}


.custom-upload-thumb {
    width: 40px;
    height: 40px;
    object-fit: cover;
    border-radius: 4px;
    margin-right: 10px;
    min-width: 40px;
}
    </style>
    
    <section class="er-pt-32 md:er-px-12 mb:er-pt-16">
        <div class="background-image er-aspect-video er-max-w-screen-lg er-mx-auto">
            <img width="1024" height="576" src="https://cdn.shopify.com/s/files/1/0583/5810/4213/files/23919_2x_d75ca55a-05d2-4d6d-a7f6-394d38101d77.png?v=1751880828" alt="{{ page_title }}">
        </div>
    </section>
    <section class="er-max-w-screen-lg er-mx-auto er-text-center er-my-28 er-px-12 mb:er-my-16">
        <h1 class="text-size48 mb:er-text-5xl mb:er-leading-tight">Join Our Monthly Photo & Video Contest!</h1><br>
        <p class="er-opacity-90 text-size18 er-mt-12 mb:er-text-2xl">
            <span>
                Got an amazing moment with your Urtopia? Show it off! Share your favorite photos or videos of your Urtopia ride for a chance to be featured on our official social channels. Plus, <span class="er-text-primary er-font-bold">every entry gets a shot at winning $100 toward your next Urtopia accessory.</span> <br><br>Just hit submit and you‚Äôre in‚Äîby doing so, you agree to our Terms & Conditions. Let your ride shine!
            </span>
        </p>
    </section>
    <div class="er-max-w-screen-md mb:er-my-36 er-mx-auto er-px-12 er-my-48 er-text-dark/90 er-space-y-12 er-box-border er-flex-col er-overflow-hidden thankyou er-items-center er-justify-center er-text-center er-hidden">
        <svg viewBox="64 64 896 896" focusable="false" class="er-fill-green-600" width="96" height="96"  aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"></path></svg>
        <h1 class="text-size60 mb:er-text-6xl">Thank You!</h1>
        <p class="text-size18 mb:er-text-2xl">
            <span>We will get back to you as soon as possible with a responseüôÇ</span>
        </p>
    </div>
    <form id="form" class="er-max-w-4xl er-mx-auto er-px-12 er-text-dark/90 er-space-y-12 er-box-border er-flex er-flex-col er-overflow-hidden mb:er-space-y-8">
            <fieldset class="er-flex er-flex-col er-space-y-6 er-border-0 er-p-0">
                <label for="full_name" class="text-size24 mb:er-text-3xl">Full name:<span class="er-text-red-500">*</span></label>
                <input type="text" id="full_name" name="full_name" placeholder="Please enter your full name"
                    class="mb:er-text-2xl er-box-border er-font-base er-w-full er-border-2 er-border-dark/30 placeholder:er-text-black/15 er-border-solid er-rounded-xl er-text-dark/85 er-text-3xl er-p-4 focus:er-border-primary/80 focus-visible:er-border-primary/80 focus:er-ring-primary focus:er-shadow-primary"
                    required>
            </fieldset>
            <fieldset class="er-flex er-flex-col er-space-y-6 er-border-0 er-p-0">
                <label for="email" class="text-size24 mb:er-text-3xl">Email:<span class="er-text-red-500">*</span></label>
                <input type="email" id="email" name="email" placeholder="Please enter your email"
                    class="mb:er-text-2xl er-box-border er-font-base er-w-full er-border-2 er-border-dark/30 placeholder:er-text-black/15 er-border-solid er-rounded-xl er-text-dark/85 er-text-3xl er-p-4 focus:er-border-primary/80 focus-visible:er-border-primary/80 focus:er-ring-primary focus:er-shadow-primary"
                    required>
            </fieldset>
            <fieldset class="er-flex er-flex-col er-space-y-6 er-border-0 er-p-0">
                <label for="location" class="text-size24 mb:er-text-3xl">Location of photo/video:<span class="er-text-red-500">*</span></label>
                <input type="text" id="location" name="location" placeholder="Please enter your location"
                    class="mb:er-text-2xl er-box-border er-font-base er-w-full er-border-2 er-border-dark/30 placeholder:er-text-black/15 er-border-solid er-rounded-xl er-text-dark/85 er-text-3xl er-p-4 focus:er-border-primary/80 focus-visible:er-border-primary/80 focus:er-ring-primary focus:er-shadow-primary"
                    required>
            </fieldset>
            <fieldset class="er-flex er-flex-col er-space-y-6 er-border-0 er-p-0">
                <label for="instagram_handle" class="text-size24 mb:er-text-3xl">Instagram handle (optional):</label>
                <input type="text" id="instagram_handle" name="instagram_handle" placeholder="Please enter your instagram handle"
                    class="mb:er-text-2xl er-box-border er-font-base er-w-full er-border-2 er-border-dark/30 placeholder:er-text-black/15 er-border-solid er-rounded-xl er-text-dark/85 er-text-3xl er-p-4 focus:er-border-primary/80 focus-visible:er-border-primary/80 focus:er-ring-primary focus:er-shadow-primary"
                    >
            </fieldset>
            <fieldset class="custom-upload-wrap er-border-0 er-p-0">
                <label for="custom-upload-input" class="custom-upload-label text-size24 mb:er-text-3xl">Upload your photo/video here <span class="required">*</span></label>
                <div class="custom-upload-area" id="custom-upload-area">
                    <div class="custom-upload-icon">&#8682;</div>
                    <div class="custom-upload-text">Upload a File</div>
                    <div class="custom-upload-subtext">Drag and drop files here</div>
                    <input type="file" id="custom-upload-input" name="custom-upload-input" multiple accept="image/*,video/*" class="er-opacity-0" required>
                </div>
                <div class="custom-upload-list" id="custom-upload-list"></div>
                <div class="custom-upload-error er-opacity-75 text-size14" id="custom-upload-error"><i>tips: You can upload media files up to 20MB in size</i></div>
            </fieldset>
            <fieldset class="er-flex er-flex-col er-space-y-6 er-border-0 er-p-0">
                <label for="about_these " class="text-size24 mb:er-text-3xl">Tell us a little bit about this photo or your journey with Urtopia E-Bikes:<span class="er-text-red-500">*</span></label>
                <textarea id="about_these" name="about_these" rows="6" placeholder="Please enter...." class="mb:er-text-2xl er-box-border er-font-base er-w-full er-border-2 er-border-dark/30 placeholder:er-text-black/15 er-border-solid er-rounded-xl er-text-dark/85 er-text-3xl er-p-4 focus:er-border-primary/80 focus-visible:er-border-primary/80 focus:er-ring-primary focus:er-shadow-primary" required></textarea>
            </fieldset>
            <button type="submit" class="er-button !er-w-full er-mx-auto !er-mt-16">Submit</button>
    </form>
    <section class="er-max-w-screen-md er-mx-auto er-text-left er-mt-28 er-mb-60 er-opacity-90 er-px-12 mb:er-mt-16 mb:er-mb-32">
        <h2 class="text-size24 er-font-bold mb:er-mb-4">Official Terms & Conditions</h2><br>
        <h3 class="text-size20 er-mb-2 er-font-bold er-mt-0">Winner Notification</h3>
        <p class="text-size18 mb:er-text-2xl">
            <span> If your photo or video is selected as a monthly winner, you will be contacted via email.</span>
        </p> 

        <h3 class="text-size20 er-mb-2 er-font-bold">Usage Rights</h3>
        <p class="text-size18 mb:er-text-2xl">
            <span> By entering, you grant Urtopia permission to use your submitted content across all promotional platforms, including: <br>Urtopia‚Äôs website and blog<br> Email newsletters and campaigns<br> Printed materials<br> Official social media channels (e.g., Facebook, Instagram, X/Twitter)<br> Minor edits may be applied to fit formatting or design requirements. Submission does not guarantee publication.</span>
        </p> 

        <h3 class="text-size20 er-mb-2 er-font-bold">Contest Changes</h3>
       <p class="text-size18 mb:er-text-2xl">
            <span>Urtopia reserves the right to modify, suspend, or terminate the contest or any submission period at any time, for any reason, without notice.</span>
        </p> 

         <h3 class="text-size20 er-mb-2 er-font-bold">Ownership & Copyright</h3>
       <p class="text-size18 mb:er-text-2xl">
            <span> All entries must be submitted by the original creator. <br>You must be the sole copyright holder of the photo or video. <br>Do not submit media created by another person. <br>Submission serves as your guarantee that you own the rights and are legally allowed to provide Urtopia the usage license. </span>
        </p> 
        
        <h3 class="text-size20 er-mb-2 er-font-bold">Permissions Granted</h3>
       <p class="text-size18 mb:er-text-2xl">
            <span>By submitting, you give Urtopia the right to: <br>Display your content<br> Publish your name and general location<br> Refer to the subject of the submission (e.g., ride location or story)<br> You also confirm your submission is original, unpublished, and does not infringe on third-party rights.</span>
        </p> 

      <h3 class="text-size20 er-mb-2 er-font-bold">Reward Restrictions</h3>
       <p class="text-size18 mb:er-text-2xl">
            <span>
             Discount vouchers awarded as prizes cannot be used toward the purchase of e-bikes, batteries, ZENITH HUD glasses or hitch bike racks.</span>
        </p> 

        <h3 class="text-size20 er-mb-2 er-font-bold">Legal Binding</h3>
       <p class="text-size18 mb:er-text-2xl">
            <span>
             These terms are binding for all participants and their heirs, legal representatives, successors, and assigns.</span>
        </p> 

        <h3 class="text-size20 er-mb-2 er-font-bold">Final Decisions</h3>
       <p class="text-size18 mb:er-text-2xl">
            <span>All matters related to the contest rules and administration are under the sole discretion of Urtopia, and all decisions made are final.</span>
        </p> 
    </section>
<script type="module">
    const files = new Map()
    const allowedTypes = [
    'image/jpeg','image/png','image/gif','image/jpg','image/webp',
    'video/mp4','video/quicktime','video/mov','video/avi','video/mpeg'
    ];
    const maxSize = 20 * 1024 * 1024; // 20MB

    function formatSize(size) {
    if (size > 1024*1024) return (size/1024/1024).toFixed(1)+'MB';
    if (size > 1024) return (size/1024).toFixed(1)+'KB';
    return size+'B';
    }

      $(document).on('submit', `#form`, function (event) {
      event.preventDefault(); // Èò≤Ê≠¢Ë°®ÂçïÊèê‰∫§Ôºà‰∏∫‰∫ÜÊºîÁ§∫Ôºâ

      const values = {}
      // Ëé∑ÂèñË°®ÂçïÁöÑÊâÄÊúâÊï∞ÊçÆ
      for (const { name, value } of $(this).serializeArray()) {
          values[name] = value
      }

      values.media_list = []

      for (const element of files.values()) {
        values.media_list.push(element)
      }

      console.log(values)

      this.reset();

      $('.thankyou').addClass('er-flex').removeClass('er-hidden');
      $(this).hide();

      fetch('https://api.newurtopia.com/third_part/media_contest', {
        'method': 'POST',
        'headers': {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(values)
      })

      return false
  });

// ÁÇπÂáª‰∏ä‰º†Âå∫ÂüüÔºåËß¶ÂèëÊñá‰ª∂ÈÄâÊã©
$('#custom-upload-area').on('click', function(e) {
  // ÈÅøÂÖçÁÇπÂáªinputÊú¨Ë∫´Êó∂ÈáçÂ§çËß¶Âèë
  if (e.target.id === 'custom-upload-input') return;
  $('#custom-upload-input').trigger('click');
});

// ÈÄâÊã©Êñá‰ª∂ÂêéÂ§ÑÁêÜ
$('#custom-upload-input').on('change', function(e) {
  handleFiles(e.target.files);
  // ‰∏çË¶ÅÂú®ËøôÈáåÂÜçËß¶Âèë clickÔºåÂê¶Âàô‰ºöÊ≠ªÂæ™ÁéØ
});

$('#custom-upload-area').on('dragover', function(e) {
  e.preventDefault();
  $(this).addClass('dragover');
});
$('#custom-upload-area').on('dragleave', function(e) {
  e.preventDefault();
  $(this).removeClass('dragover');
});
$('#custom-upload-area').on('drop', function(e) {
  e.preventDefault();
  $(this).removeClass('dragover');
  handleFiles(e.originalEvent.dataTransfer.files);
});

function setInputFiles(fileList) {
  const dataTransfer = new DataTransfer();
  for (let file of fileList) {
    dataTransfer.items.add(file);
  }
  document.getElementById('custom-upload-input').files = dataTransfer.files;
}

// Âú® handleFiles ÈáåË∞ÉÁî®
function handleFiles(fileList) {
  let filesArr = [];
  for (let file of fileList) {
    addFileToList(file);
    filesArr.push(file);
  }
  setInputFiles(filesArr);
}

function addFileToList(file) {
  $('#custom-upload-list').find('.custom-upload-error-msg').remove();
  $('#custom-upload-list').find('.error').remove();
  const id = 'file_' + Math.random().toString(36).substr(2,9);
  let error = '';
  if (!allowedTypes.includes(file.type)) {
    error = `${file.name} has invalid extension. Only jpg, jpeg, png, gif, webp, mp4, mov, avi, mpeg allowed.`;
  } else if (file.size > maxSize) {
    error = `${file.name} is too large. Max 20MB allowed.`;
  }

  if (error) {
    return $('#custom-upload-list').append(`<div class="custom-upload-error-msg">${error}</div>`);
  }

  const isImage = file.type.startsWith('image/');
const fileContent = isImage
  ? `<img src="${URL.createObjectURL(file)}" alt="${file.name}" class="custom-upload-thumb"/>`
  : `<video src="${URL.createObjectURL(file)}" alt="${file.name}" class="custom-upload-thumb"></video>`;

  const $item = $(`
    <div class="custom-upload-file${error ? ' error' : ''}" id="${id}">
      <div class="text-size12 er-mb-2 er-break-all">${file.name}</div>
      <div class="er-flex er-items-center">
        ${fileContent}
        <span class="er-flex-1"></span>
        <span class="custom-upload-filesize">${formatSize(file.size)}</span>
        <div class="custom-upload-progress"><div class="custom-upload-progress-bar"></div></div>
        <svg class="custom-upload-remove" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#d16b8a"><path d="M267.33-120q-27.5 0-47.08-19.58-19.58-19.59-19.58-47.09V-740H160v-66.67h192V-840h256v33.33h192V-740h-40.67v553.33q0 27-19.83 46.84Q719.67-120 692.67-120H267.33Zm425.34-620H267.33v553.33h425.34V-740Zm-328 469.33h66.66v-386h-66.66v386Zm164 0h66.66v-386h-66.66v386ZM267.33-740v553.33V-740Z"/></svg>
      </div>
    </div>
  `);
  $('#custom-upload-list').append($item);

  uploadFile(file, id);
  $item.find('.custom-upload-remove').on('click', function() {
    $item.remove();
    files.delete(id);

    if (files.size === 0) {
      const dataTransfer = new DataTransfer();
      document.getElementById('custom-upload-input').files = dataTransfer.files;
    }
  });
}

function uploadFile(file, id) {
  const $bar = $(`#${id} .custom-upload-progress-bar`);
  const $item = $(`#${id}`);
  // ËøôÈáåÁî®ÊºîÁ§∫Áî®ÁöÑÊ®°Êãü‰∏ä‰º†ÔºåÂÆûÈôÖËØ∑ÊõøÊç¢‰∏∫‰Ω†ÁöÑ‰∏ä‰º†Êé•Âè£
  const fakeUrl = 'https://urtopia-file-upload.erpanomer.workers.dev/';
  // const fakeUrl = 'https://httpbin.org/post';
  const formData = new FormData();
  formData.append('file', file);
  formData.append('file_from', 'photo-contest');

  $.ajax({
    url: fakeUrl,
    type: 'POST',
    data: formData,
    processData: false,
    contentType: false,
    xhr: function() {
      let xhr = new window.XMLHttpRequest();
      xhr.upload.addEventListener('progress', function(e) {
        if (e.lengthComputable) {
          let percent = (e.loaded / e.total) * 100;
          $bar.css('width', percent + '%');
        }
      }, false);
      return xhr;
    },
    success: function(res) {
      files.set(id, res.url);
      $bar.css('width', '100%');
      $item.removeClass('error');
    },
    error: function() {
      $item.addClass('error');
      $item.html(`<div class="custom-upload-error-msg">${file.name} Upload failed. Please try again.</div>`);
    }
  });
}
</script>