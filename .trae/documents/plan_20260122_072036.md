# 将 pre-push 脚本转换为 JavaScript 版本

## 分析差异

### pre-push 脚本（Bash）特点：
1. 使用 `git diff-tree --no-commit-id --name-only -r HEAD` 获取最后提交的变更文件
2. 非 master 分支时执行 `exit 0`（跳过同步但不阻止推送）
3. 使用 `eval $CMD` 执行命令
4. 使用 `sort -u` 进行去重

### shopify-sync.js（当前）特点：
1. 使用 `git diff --name-only @{u}..HEAD` 获取变更文件
2. 非 master 分支时执行 `exit 1`（阻止推送）
3. 使用 `execSync(cmd, { stdio: "inherit" })` 执行命令
4. 使用 JavaScript `Set` 进行去重

## 转换方案

将 Bash 脚本的逻辑完全转换为 JavaScript，确保行为一致：

1. **分支检查**：非 master 分支时 `exit 0`
2. **获取变更文件**：使用 `git diff-tree --no-commit-id --name-only -r HEAD`
3. **过滤文件**：只保留 SYNC_DIRS 中的文件
4. **去重**：使用 `sort -u` 命令（与 Bash 一致）
5. **构建命令**：与 Bash 脚本相同的命令格式
6. **执行命令**：使用 `execSync` 执行

## 输出文件

更新 `shopify-sync.js`，使其与 pre-push 脚本行为完全一致。