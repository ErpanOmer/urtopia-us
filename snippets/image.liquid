{%- liquid
  assign default_class_name = 'er-object-center er-object-cover'
  assign loading = loading | default: 'lazy'
  assign fetchpriority = fetchpriority | default: 'low'
  assign decoding = decoding | default: 'async'
  assign alt = alt | default: page_title
  assign width = width | default: 2880
  assign height = height | default: 0
  assign src = src | default: ''
  assign mb_src = mb_src | default: src

  if class != blank
    assign class = default_class_name | append: ' ' | append: class
  else
    assign class = default_class_name
  endif

  if first_screen
    assign loading = 'eager'
    assign fetchpriority = 'high' 
    assign decoding = 'sync'
  endif
-%}
{% if first_screen %}
  <link rel="preload" href="{%- if width >= 640 -%}{{ mb_src }}&width={{ 640 }}{%- else -%}{{ mb_src }}&width={{ width }}{%- endif -%}" as="image" fetchpriorit="{{ fetchpriority }}" media="(max-width: 768px)" crossorigin>
{% endif %}
<picture>
    <source srcset="{%- if width >= 640 -%}{{ mb_src }}&width={{ 640 }} 640w{%- else -%}{{ mb_src }}&width={{ width }} {{ width }}w{%- endif -%}" media="(max-width: 768px)">
    <source srcset="
        {%- if width >= 1280 -%}{{ src }}&width={{ 1280 }} 1280w,{%- endif -%}
        {%- if width >= 1920 -%}{{ src }}&width={{ 1920 }} 1920w,{%- endif -%}
        {{ src }}&width={{ width }} {{ width }}w" media="(min-width: 769px)">
    <img src="{{ mb_src }}&width={{ 640 }}" class="{{ class }}" loading="{{ loading }}" decoding="{{ decoding }}" fetchpriority="{{ fetchpriority }}"  width="{{ width }}" height="{{ height }}" alt="{{ alt }}">
  </picture>