<dialog id="SubscribeEmailDialog">
    <div class="subscribe-container">
        {% render 'image', class: "er-h-full er-w-full" mb_src: "https://cdn.shopify.com/s/files/1/0583/5810/4213/files/26181_2x_be019312-a46d-4e07-96d8-73e57d30435c.jpg?v=1761894392", src: "https://cdn.shopify.com/s/files/1/0583/5810/4213/files/26180_2x_cfac0753-87aa-4eb6-b93e-4e91de8dec93.jpg?v=1761894404" %}
        <div class="subscribe">
            <span class="text-size30 mb:er-text-3xl" style="color: #FF7F00;">{{ settings.sale_name }}</span>
            <div class="text-size60 mb:er-text-6xl er-mt-16 er-mb-4 mb:er-mt-4">{{ all_products["urtopia-carbon-fusion-gt"].compare_at_price | minus: all_products["urtopia-carbon-fusion-gt"].price | money_without_trailing_zeros }}&nbsp;<span class="u30DemiBold_v2">OFF</span></div>
            <div class="u17Light_v2">Subscribe now to unlock exclusive discounts, early product launches & VIP offers!</div>
            <form class="new-contact er-mt-28 mb:er-mt-10" action="/contact#ContactFooter" target="_blank" method="post" accept-charset="UTF-8">
                <div class="email">
                    <input type="hidden" name="form_type" value="customer">
                    <input type="hidden" name="utf8" value="✓">
                    <input type="hidden" name="contact[tags]" value="newsletter">
                    <input placeholder="Enter email here" type="email" name="contact[email]" required>
                    <button class="my-button my-button-black" type="submit">Subscribe</button>
                </div>
            </form>
        </div>
        <span class="close">×</span>
    </div>
</dialog>

<dialog id="TestRideDialog">
    <div class="testride_dialog">
        <img width="500" height="623" loading="lazy" fetchpriority="low" src="https://cdn.shopify.com/s/files/1/0583/5810/4213/files/ccc.png?v=1706585634&width=600" alt="{{ settings.sale_name }}">
        <div>
            <div class="u30DemiBold_v2">Test ride spots near you</div>
            <div class="u24Medium_v2">Experience the bike in real</div>
            <div class="my-button my-button-black">Book Now</div>
        </div>
        <span class="close">×</span>
    </div>
</dialog>
<div id="global2top">
    <svg t="1735027455730" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1443" width="32" height="32"><path d="M576 512v512H448V512H256l256-256 256 256H576zM0 0h1024v128H0V0z" fill="#fff" p-id="1444"></path></svg>
</div>
<script type="module">
      window.shopUrl = '{{ request.origin }}';
      window.routes = {
        cart_add_url: '{{ routes.cart_add_url }}',
        cart_change_url: '{{ routes.cart_change_url }}',
        cart_update_url: '{{ routes.cart_update_url }}',
        cart_url: '{{ routes.cart_url }}',
        predictive_search_url: '{{ routes.predictive_search_url }}',
      };

      window.cartStrings = {
        error: `{{ 'sections.cart.cart_error' | t }}`,
        quantityError: `{{ 'sections.cart.cart_quantity_error_html' | t: quantity: '[quantity]' }}`,
      };

      window.variantStrings = {
        addToCart: `{{ 'products.product.add_to_cart' | t }}`,
        soldOut: `{{ 'products.product.sold_out' | t }}`,
        unavailable: `{{ 'products.product.unavailable' | t }}`,
      };

      window.accessibilityStrings = {
        imageAvailable: `{{ 'products.product.media.image_available' | t: index: '[index]' }}`,
        shareSuccess: `{{ 'general.share.success_message' | t }}`,
        pauseSlideshow: `{{ 'sections.slideshow.pause_slideshow' | t }}`,
        playSlideshow: `{{ 'sections.slideshow.play_slideshow' | t }}`,
  };
  window.addEventListener('load', () => {
    // 检测浏览器是否支持 <dialog>
      if (typeof HTMLDialogElement === "undefined") {
        // 动态加载 Polyfill 的样式和脚本
        const script = document.createElement("script");
        script.src = "{{ 'dialog-polyfill.js' | asset_url }}";
        script.onload = () => {
            document.querySelectorAll("dialog").forEach(dialog => {
            dialogPolyfill.registerDialog(dialog);
          });
        };
        
        document.head.appendChild(script);
      };
  });
</script>
<script>
  fetch(window.location.pathname + '?sections=cart-drawer').then(r => r.json()).then(r => {
    document.body.insertAdjacentHTML('beforeend',r['cart-drawer']);
  })

  fetch(window.location.pathname + '?sections=footer').then(r => r.json()).then(r => {
    document.body.insertAdjacentHTML('beforeend',r['footer']);
  });
</script>